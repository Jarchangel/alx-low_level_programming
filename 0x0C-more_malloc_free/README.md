This is more malloc and freeing
